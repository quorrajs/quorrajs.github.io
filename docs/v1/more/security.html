<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>QuorraJS</title>

    <link rel="icon" href="https://quorrajs.org/assets/icons/favicon.ico">
    <link rel="stylesheet" href="https://quorrajs.org/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://quorrajs.org/assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://quorrajs.org/assets/css/prism.css">
    <link rel="stylesheet" href="https://quorrajs.org/assets/css/main.css">
    <script>
    	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    	  ga('create', 'UA-42913540-2', 'auto');
    	  ga('send', 'pageview');
    </script>
</head>
<body>
<div class="navbar main-menu navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span
                        class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span
                        class="icon-bar"></span> <span class="icon-bar"></span></button>
            <a class="navbar-brand" href="/" title="QuorraJS">
                <img src="https://quorrajs.org/assets/images/logo.png" alt="logo" title="QuorraJS"/>
            </a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right" id="menu">
                <li><a data-scroll data-options="easing: easeOutQuart"
                       href="/docs/v1/getting-started/installation.html">Documentation</a></li>
                <li><a data-scroll data-options="easing: easeOutQuart"
                       href="https://medium.com/@quorrajs" target="_blank">Blog</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="https://github.com/quorrajs" target="_blank">Github</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="https://quorrajs.slack.com" target="_blank">Slack</a></li>
                        <li><a href="https://gitter.im/quorrajs/quorrajs" target="_blank">Gitter</a></li>
                        <li><a href="https://twitter.com/quorrajs" target="_blank">Twitter</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <!--/.nav-collapse -->
    </div>
</div>

<main class="container">
    <div class="row">

        
            <nav id="sidebar" class="col-md-3 col-sm-3 col-lg-3" role="navigation">

                                    <p class="text-muted">
                        Preface
                    </p>

                    <ul class="nav nav-pills nav-stacked">
                                                    <li class="">
                                <a href="/docs/v1/preface/quickstart.html">
                                    Quickstart
                                </a>
                            </li>
                                            </ul>
                                    <p class="text-muted">
                        Getting started
                    </p>

                    <ul class="nav nav-pills nav-stacked">
                                                    <li class="">
                                <a href="/docs/v1/getting-started/installation.html">
                                    Installation
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/getting-started/configuration.html">
                                    Configuration
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/getting-started/request-lifecycle.html">
                                    Request Lifecycle
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/getting-started/routing.html">
                                    Routing
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/getting-started/requests-&amp;-input.html">
                                    Requests & Input
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/getting-started/views-&amp;-responses.html">
                                    Views & Responses
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/getting-started/controllers.html">
                                    Controllers
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/getting-started/errors-&amp;-logging.html">
                                    Errors & Logging
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/getting-started/models-&amp;-orm.html">
                                    Models & ORM
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/getting-started/globals.html">
                                    Globals
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/getting-started/middleware.html">
                                    Middleware
                                </a>
                            </li>
                                            </ul>
                                    <p class="text-muted">
                        Lerning more
                    </p>

                    <ul class="nav nav-pills nav-stacked">
                                                    <li class="">
                                <a href="/docs/v1/more/security.html">
                                    Security
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/middlewares/session.html">
                                    Session
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/more/mail.html">
                                    Mail
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/more/request.html">
                                    Request Object
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/more/response.html">
                                    Response Object
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/middlewares/body-parser.html">
                                    Body Parser
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/middlewares/query-parser.html">
                                    Query Parser
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/middlewares/cookie-parser.html">
                                    Cookie Parser
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/middlewares/authentication.html">
                                    Authentication
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/middlewares/localization.html">
                                    Localization
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/middlewares/http-method-override.html">
                                    HTTP Method Override
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/middlewares/serve-static.html">
                                    Server Static
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/more/miscellaneous.html">
                                    Miscellaneous
                                </a>
                            </li>
                                                    <li class="">
                                <a href="/docs/v1/more/testing.html">
                                    Testing
                                </a>
                            </li>
                                            </ul>
                                    <p class="text-muted">
                        Quorra CLI
                    </p>

                    <ul class="nav nav-pills nav-stacked">
                                                    <li class="">
                                <a href="/docs/v1/quorra-cli/overview.html">
                                    Overview
                                </a>
                            </li>
                                            </ul>
                
            </nav>

        
        <section class="col-sm-9 col-lg-9 doc-content">
            <h1 id="security">Security</h1>
<ul>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#storing-passwords">Storing Passwords</a></li>
<li><a href="#authenticating-users">Authenticating Users</a></li>
<li><a href="#manually">Manually Logging In Users</a></li>
<li><a href="#protecting-routes">Protecting Routes</a></li>
<li><a href="#http-basic-authentication">HTTP Basic Authentication</a></li>
<li><a href="#encryption">Encryption</a></li>
</ul>
<h2 id="configuration">Configuration</h2>
<p>Quorra aims to make implementing authentication very simple. In fact, almost everything is configured for you out of the box. The authentication configuration file is located at <code>app/config/auth.js</code>, which contains well documented auth related options for tweaking the behavior of the authentication facilities.</p>
<p>By default, Quorra includes a <code>User</code> model in your <code>app/models</code> directory. Please remember when building the Schema for this Model to ensure that the password field is a minimum of 60 characters.</p>
<blockquote>
<p><strong>Note:</strong> Don't forget to set auth and session middlewares to true in the <code>app/config/middleware.js</code> file to enable authentication support in your application.</p>
</blockquote>
<h2 id="storing-passwords">Storing Passwords</h2>
<p>The Quorra <code>Hash</code> service provides secure Bcrypt hashing which wraps the popular <a href="https://www.npmjs.com/package/bcryptjs">bcryptjs</a> npm module:</p>
<h3 id="hashing-a-password-using-bcrypt">Hashing A Password Using Bcrypt</h3>
<pre><code class="language-javascript">    App.hash.make('password', function (err, hash) {
        // Use hashed password
    });</code></pre>
<h3 id="verifying-a-password-against-a-hash">Verifying A Password Against A Hash</h3>
<pre><code class="language-javascript">    App.hash.check('password', hashedPassword, function (err, result) {
        if(result) {
            // The passwords match...
        }
    });</code></pre>
<h2 id="authenticating-users">Authenticating Users</h2>
<p>To log a user into your application, you may use the <code>Auth::attempt</code> method.</p>
<pre><code class="language-javascript">    req.auth.attempt({email: 'email', password: 'password'}, function (result) {
        if(result) {
            // direct user to appropriate page
        }
    });</code></pre>
<p>Take note that <code>email</code> is not a required option, it is merely used for example. You should use whatever column name corresponds to a &quot;username&quot; in your database.</p>
<h3 id="determining-if-a-user-is-authenticated">Determining If A User Is Authenticated</h3>
<p>To determine if the user is already logged into your application, you may use the <code>check</code> method:</p>
<pre><code class="language-javascript">    req.auth.check(function (result) {
        if(result) {
            // The user is logged in...
        }
    })</code></pre>
<h3 id="authenticating-a-user-and-quotrememberingquot-them">Authenticating A User And &quot;Remembering&quot; Them</h3>
<p>If you would like to provide &quot;remember me&quot; functionality in your application, you may pass <code>true</code> as the third argument to the <code>attempt</code> method, which will keep the user authenticated indefinitely (or until they manually logout). Of course, your <code>users</code> table must include the string <code>remember_token</code> column, which will be used to store the &quot;remember me&quot; token.</p>
<pre><code class="language-javascript">    req.auth.attempt({email: 'email', password: 'password'}, function (result) {
        if(result) {
            // The user is being remembered...
        }
    }, true);</code></pre>
<blockquote>
<p><strong>Note:</strong> If the <code>attempt</code> method returns callback with <code>true</code>, the user is considered logged into the application.</p>
</blockquote>
<h3 id="determining-if-user-authenticated-via-remember">Determining If User Authenticated Via Remember</h3>
<p>If you are &quot;remembering&quot; user logins, you may use the <code>viaRemember</code> method to determine if the user was authenticated using the &quot;remember me&quot; cookie:</p>
<pre><code class="language-javascript">    if (req.auth.viaRemember())
    {
        //
    }</code></pre>
<h3 id="authenticating-a-user-with-conditions">Authenticating A User With Conditions</h3>
<p>You also may add extra conditions to the authenticating query:</p>
<pre><code class="language-javascript">    req.auth.attempt({email: 'email', password: 'password', active: true}, function (result) {
        if(result) {
            // The user is active, not suspended, and exists.
        }
    });</code></pre>
<blockquote>
<p><strong>Note:</strong> For added protection against session fixation, the user's session ID will automatically be regenerated after authenticating.</p>
</blockquote>
<h3 id="accessing-the-logged-in-user">Accessing The Logged In User</h3>
<p>Once a user is authenticated, you may access the User record:</p>
<pre><code class="language-javascript">    req.auth.user(function (user) {
        var email = user.email;
    });</code></pre>
<p>To retrieve the authenticated user's ID, you may use the <code>id</code> method:</p>
<pre><code class="language-javascript">    var id = req.auth.id();</code></pre>
<p>To simply log a user into the application by their ID, use the <code>loginUsingId</code> method:</p>
<pre><code class="language-javascript">    req.auth.loginUsingId(1, function (user) {
        // login success
    });</code></pre>
<h3 id="validating-user-credentials-without-login">Validating User Credentials Without Login</h3>
<p>The <code>validate</code> method allows you to validate a user's credentials without actually logging them into the application:</p>
<pre><code class="language-javascript">    req.auth.validate(credentials, function (result) {
        if(result) {
            //
        }
    })</code></pre>
<h3 id="logging-a-user-in-for-a-single-request">Logging A User In For A Single Request</h3>
<p>You may also use the <code>once</code> method to log a user into the application for a single request. No sessions or cookies will be utilized.</p>
<pre><code class="language-javascript">    req.auth.once(credentials, function (result) {
        if(result) {
            //
        }
    });</code></pre>
<h3 id="logging-a-user-out-of-the-application">Logging A User Out Of The Application</h3>
<pre><code class="language-javascript">    req.auth.logout(function() {
        //
    });</code></pre>
<h2 id="manually-logging-in-users">Manually Logging In Users</h2>
<p>If you need to log an existing user object into your application, you may simply call the <code>login</code> method with the object:</p>
<pre><code class="language-javascript">    User.findOne(1).exec(function (err, user) {
        req.auth.login(user, function () {
            // user logged in
        });
    });</code></pre>
<p>This is equivalent to logging in a user via credentials using the <code>attempt</code> method.</p>
<h2 id="protecting-routes">Protecting Routes</h2>
<p>Route filters may be used to allow only authenticated users to access a given route. Quorra provides the <code>auth</code> filter by default, and it is defined in <code>app/filters.js</code>.</p>
<h4 id="protecting-a-route">Protecting A Route</h4>
<pre><code class="language-javascript">    Route.get('profile', {before: 'auth', uses: function()
    {
        // Only authenticated users may enter...
    }});</code></pre>
<h3 id="csrf-protection">CSRF Protection</h3>
<p>Quorra provides an easy method of protecting your application from cross-site request forgeries.</p>
<h4 id="inserting-csrf-token-into-form">Inserting CSRF Token Into Form</h4>
<p>Pass csrfToken to view after generating it with method <code>request.csrfToken</code> from a route.</p>
<p>For example</p>
<pre><code class="language-javascript">    Route.get('/register', function(req, res) {
        res.view('form', { csrfToken: req.csrfToken() });
    });</code></pre>
<p>Use csrf token in your view</p>
<pre><code class="language-javascript">    &lt;input type="hidden" name="_token" value="{{ csrfToken }}"&gt;</code></pre>
<h4 id="validate-the-submitted-csrf-token">Validate The Submitted CSRF Token</h4>
<pre><code class="language-javascript">    Route.post('register', {before: 'csrf', uses: function(req, res) {
        //'You gave a valid CSRF token!';
    }});</code></pre>
<h2 id="http-basic-authentication">HTTP Basic Authentication</h2>
<p>HTTP Basic Authentication provides a quick way to authenticate users of your application without setting up a dedicated &quot;login&quot; page. To get started, attach the <code>auth.basic</code> filter to your route:</p>
<h4 id="protecting-a-route-with-http-basic">Protecting A Route With HTTP Basic</h4>
<pre><code class="language-javascript">    Route.get('profile', {before: 'auth.basic', uses: function(req, res) {
        // Only authenticated users may enter...
    }});</code></pre>
<p>By default, the <code>basic</code> filter will use the <code>email</code> column on the user record when authenticating. If you wish to use another column you may pass the column name as the second parameter to the <code>basic</code> method in your <code>app/filters.js</code> file:</p>
<pre><code class="language-javascript">    Route.filter('auth.basic', function(request, response, next) {
        req.auth.basic(function (result) {
            if (result) {
                next();
            } else {
                var error = new Error('Invalid credentials');

                error.status = 401;
                response.setHeader('WWW-Authenticate', 'Basic');
                response.abort(error);
            }
        }, 'username');
    });</code></pre>
<h4 id="setting-up-a-stateless-http-basic-filter">Setting Up A Stateless HTTP Basic Filter</h4>
<p>You may also use HTTP Basic Authentication without setting a user identifier cookie in the session, which is particularly useful for API authentication. To do so, define a filter that executes the <code>onceBasic</code> method:</p>
<pre><code class="language-javascript">    Route.filter('basic.once', function(request, response, next) {
        req.auth.onceBasic(function (result) {
            if (result) {
                next();
            } else {
                var error = new Error('Invalid credentials');

                error.status = 401;
                response.setHeader('WWW-Authenticate', 'Basic');
                response.abort(error);
            }
        });
    });</code></pre>
<h2 id="encryption">Encryption</h2>
<p>Quorra provides facilities for strong AES encryption:</p>
<h4 id="encrypting-a-value">Encrypting A Value</h4>
<pre><code class="language-javascript">    var encrypted = App.encrypter.encrypt('secret');</code></pre>
<blockquote>
<p><strong>Note:</strong> Be sure to set a random string in the <code>key</code> option of the <code>app/config/app.js</code> file. Otherwise, encrypted values will not be secure.</p>
</blockquote>
<h4 id="decrypting-a-value">Decrypting A Value</h4>
<pre><code class="language-javascript">    var  decrypted = App.encrypter.decrypt(encrypted);</code></pre>
        </section>

    </div>
</main>

<section id="info">
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-md-offset-4">
                <h4 class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.8s">Connect with us</h4>

                <div class="clearfix"></div>
                <ul class="list-inline social">
                    <li class="wow bounceIn" data-wow-duration="1.0s" data-wow-delay="0.8s">
                        <a href="https://github.com/quorrajs" target="_blank">
                            <i class="fa fa-github-square"></i>
                        </a>
                    </li>
                    <li class="wow bounceIn" data-wow-duration="1.0s" data-wow-delay="0.8s">
                        <a href="https://www.facebook.com/quorrajs" target="_blank">
                            <i class="fa fa-facebook-square"></i>
                        </a>
                    </li>
                    <li class="wow bounceIn" data-wow-duration="1.0s" data-wow-delay="1.0s">
                        <a href="https://twitter.com/quorrajs" target="_blank">
                            <i class="fa fa-twitter-square"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>

<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script src="https://quorrajs.org/assets/js/prism.js"></script>

<script>
</script>

</body>
</html>
