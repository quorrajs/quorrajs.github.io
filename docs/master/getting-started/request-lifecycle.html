<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>QuorraJS</title>
    <link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico"/>
    <link href='https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,400italic' rel='stylesheet'
          type='text/css'>
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/theme.css">
    <link rel="stylesheet" href="/assets/css/color-defaults.min.css">
    <link rel="stylesheet" href="/assets/css/swatch-blue-white.css">
    <link rel="stylesheet" href="/assets/css/swatch-white-blue.css">
    <link rel="stylesheet" href="/assets/css/prism.css">
    <link rel="stylesheet" href="/assets/css/fonts.min.css" media="screen">
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-42913540-2', 'auto');
        ga('send', 'pageview');
    </script>
    
    <script id="search_suggestion_template" type="text/template">
        <div class="autocomplete-wrapper">
            {{#_highlightResult.h1}}
            <div class="h1">
                {{{ _highlightResult.h1.value }}}
            </div>
            {{/_highlightResult.h1}}

            <div class="sub-section">
                {{#_highlightResult.h2}}
                <div class="h2">
                    <span class="hash">#</span> {{{ _highlightResult.h2.value }}}
                </div>
                {{/_highlightResult.h2}}

                {{#_highlightResult.h3}}
                <div class="h3">
                    > {{{ _highlightResult.h3.value }}}
                </div>
                {{/_highlightResult.h3}}

                {{#_highlightResult.h4}}
                <div class="h4">
                    > {{{ _highlightResult.h4.value }}}
                </div>
                {{/_highlightResult.h4}}
            </div>

            {{#_highlightResult.content}}
            <div class="content">
                {{{ _highlightResult.content.value }}}
            </div>
            {{/_highlightResult.content}}
        </div>
    </script>
    <script id="search_empty_template" type="text/template">
        <div class="autocomplete-wrapper empty">
            <div class="h2">We didn't find any result for "{{query}}". Sorry!</div>
        </div>
    </script>
    <script id="search_footer_template" type="text/template">
        <div class="footer">
            <a target="_blank" href="https://www.algolia.com/">
                
                <img width="50" src="/assets/images/algolia.png">
                
                <div class="powered">powered by</div>
                <div style="clear: both"></div>
            </a>
        </div>
    </script>
    
</head>
<body>
    <div id="sidenav" class="sidenav">
        <div class="brand">
            <a href="/">QuorraJS</a>
        </div>
        <ul class="side-main-nav">
            <li><a data-scroll data-options="easing: easeOutQuart"
                   href="https://medium.com/@quorrajs" target="_blank">Blog</a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    Community
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="https://github.com/quorrajs" target="_blank">Github</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href="https://quorrajs.slack.com" target="_blank">Slack</a></li>
                    <li><a href="https://gitter.im/quorrajs/quorrajs" target="_blank">Gitter</a></li>
                    <li><a href="https://twitter.com/quorrajs" target="_blank">Twitter</a></li>
                </ul>
            </li>
        </ul>
                    <div class="side-doc-nav">
                <h3>Documentation</h3>
                                    <div class="category">
                        <h3>Preface</h3>
                        <ul>
                                                            <li class="">
                                    <a href="/docs/master/preface/quickstart.html">
                                        Quickstart
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/preface/contribution-guide.html">
                                        Contribution Guide
                                    </a>
                                </li>
                                                    </ul>
                    </div>
                                    <div class="category">
                        <h3>Getting started</h3>
                        <ul>
                                                            <li class="">
                                    <a href="/docs/master/getting-started/installation.html">
                                        Installation
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/getting-started/configuration.html">
                                        Configuration
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/getting-started/request-lifecycle.html">
                                        Request Lifecycle
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/getting-started/routing.html">
                                        Routing
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/getting-started/requests-&amp;-input.html">
                                        Requests & Input
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/getting-started/views-&amp;-responses.html">
                                        Views & Responses
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/getting-started/controllers.html">
                                        Controllers
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/getting-started/errors-&amp;-logging.html">
                                        Errors & Logging
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/getting-started/models-&amp;-orm.html">
                                        Models & ORM
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/getting-started/globals.html">
                                        Globals
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/getting-started/middleware.html">
                                        Middleware
                                    </a>
                                </li>
                                                    </ul>
                    </div>
                                    <div class="category">
                        <h3>Learning more</h3>
                        <ul>
                                                            <li class="">
                                    <a href="/docs/master/more/security.html">
                                        Security
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/middlewares/session.html">
                                        Session
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/more/mail.html">
                                        Mail
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/more/request.html">
                                        Request Object
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/more/response.html">
                                        Response Object
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/more/service-providers.html">
                                        Service Providers
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/middlewares/body-parser.html">
                                        Body Parser
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/middlewares/query-parser.html">
                                        Query Parser
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/middlewares/cookie-parser.html">
                                        Cookie Parser
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/middlewares/authentication.html">
                                        Authentication
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/middlewares/localization.html">
                                        Localization
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/middlewares/http-method-override.html">
                                        HTTP Method Override
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/middlewares/serve-static.html">
                                        Server Static
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/more/elixir.html">
                                        Elixir
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/more/miscellaneous.html">
                                        Miscellaneous
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/docs/master/more/testing.html">
                                        Testing
                                    </a>
                                </li>
                                                    </ul>
                    </div>
                                    <div class="category">
                        <h3>Quorra CLI</h3>
                        <ul>
                                                            <li class="">
                                    <a href="/docs/master/quorra-cli/overview.html">
                                        Overview
                                    </a>
                                </li>
                                                    </ul>
                    </div>
                            </div>
            </div>
    <div id="main-content">
        <span id="overlay"></span>
        <header id="masthead" class="navbar-small navbar swatch-blue-white" role="banner">
            <div class="container">
                <nav class="main">
                    <a href="/index.html" class="navbar-brand nav-block">
                        <img src="/assets/icons/logo-icon.png" alt="QuorraJS">
                        <span>QuorraJS</span>
                    </a>

                    <div id="search" class="nav-block">
                        <div class="search">
                            <input type="text" name="search" class="form-control">
                            <button type="submit"><i class="fa fa-search"></i></button>
                        </div>
                    </div>
                    <ul class="main-nav nav">
                        <li><a data-scroll data-options="easing: easeOutQuart"
                               href="/docs/1.0.0/getting-started/installation.html">Documentation</a></li>
                        <li><a data-scroll data-options="easing: easeOutQuart"
                               href="https://medium.com/@quorrajs" target="_blank">Blog</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                Community
                                <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="https://github.com/quorrajs" target="_blank">Github</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="https://quorrajs.slack.com" target="_blank">Slack</a></li>
                                <li><a href="https://gitter.im/quorrajs/quorrajs" target="_blank">Gitter</a></li>
                                <li><a href="https://twitter.com/quorrajs" target="_blank">Twitter</a></li>
                            </ul>
                        </li>
                    </ul>
                    <div class="switcher">
                        <div class="dropdown">
                            <button class="btn btn-info dropdown-toggle" type="button" aria-haspopup="true"
                                    data-toggle="dropdown">
                                Master
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                                                                                        <li>
                                        <a href="/docs/master/getting-started/request-lifecycle.html">Master</a>
                                    </li>
                                                                                                        <li>
                                        <a href="/docs/1.0.0/getting-started/request-lifecycle.html">1.0.0</a>
                                    </li>
                                                            </ul>
                        </div>
                    </div>
                    <button type="button" class="navbar-toggle collapsed">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </nav>
            </div>
        </header>
        <div id="content" role="main">
            <section class="section documentation swatch-white-blue">
                <div class="container">
                    <div class="row">
                                                    <div class="col-md-3 sidebar">
                                                                    <div class="sidebar-widget widget_categories">
                                        <h3 class="sidebar-header">Preface</h3>
                                        <ul>
                                                                                            <li class="">
                                                    <a href="/docs/master/preface/quickstart.html">
                                                        Quickstart
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/preface/contribution-guide.html">
                                                        Contribution Guide
                                                    </a>
                                                </li>
                                                                                    </ul>
                                    </div>
                                                                    <div class="sidebar-widget widget_categories">
                                        <h3 class="sidebar-header">Getting started</h3>
                                        <ul>
                                                                                            <li class="">
                                                    <a href="/docs/master/getting-started/installation.html">
                                                        Installation
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/getting-started/configuration.html">
                                                        Configuration
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/getting-started/request-lifecycle.html">
                                                        Request Lifecycle
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/getting-started/routing.html">
                                                        Routing
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/getting-started/requests-&amp;-input.html">
                                                        Requests & Input
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/getting-started/views-&amp;-responses.html">
                                                        Views & Responses
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/getting-started/controllers.html">
                                                        Controllers
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/getting-started/errors-&amp;-logging.html">
                                                        Errors & Logging
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/getting-started/models-&amp;-orm.html">
                                                        Models & ORM
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/getting-started/globals.html">
                                                        Globals
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/getting-started/middleware.html">
                                                        Middleware
                                                    </a>
                                                </li>
                                                                                    </ul>
                                    </div>
                                                                    <div class="sidebar-widget widget_categories">
                                        <h3 class="sidebar-header">Learning more</h3>
                                        <ul>
                                                                                            <li class="">
                                                    <a href="/docs/master/more/security.html">
                                                        Security
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/middlewares/session.html">
                                                        Session
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/more/mail.html">
                                                        Mail
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/more/request.html">
                                                        Request Object
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/more/response.html">
                                                        Response Object
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/more/service-providers.html">
                                                        Service Providers
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/middlewares/body-parser.html">
                                                        Body Parser
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/middlewares/query-parser.html">
                                                        Query Parser
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/middlewares/cookie-parser.html">
                                                        Cookie Parser
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/middlewares/authentication.html">
                                                        Authentication
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/middlewares/localization.html">
                                                        Localization
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/middlewares/http-method-override.html">
                                                        HTTP Method Override
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/middlewares/serve-static.html">
                                                        Server Static
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/more/elixir.html">
                                                        Elixir
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/more/miscellaneous.html">
                                                        Miscellaneous
                                                    </a>
                                                </li>
                                                                                            <li class="">
                                                    <a href="/docs/master/more/testing.html">
                                                        Testing
                                                    </a>
                                                </li>
                                                                                    </ul>
                                    </div>
                                                                    <div class="sidebar-widget widget_categories">
                                        <h3 class="sidebar-header">Quorra CLI</h3>
                                        <ul>
                                                                                            <li class="">
                                                    <a href="/docs/master/quorra-cli/overview.html">
                                                        Overview
                                                    </a>
                                                </li>
                                                                                    </ul>
                                    </div>
                                                            </div>
                                                <div class="col-md-9">
                            <article class="post">
                                <section class="section swatch-white-blue">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-12 documentation">
                                                <h1 id="request-lifecycle">Request Lifecycle</h1>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#application-start-amp-request-lifecycle">Application start</a></li>
<li><a href="#start-files">Start Files</a></li>
<li><a href="#application-events">Application Events</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>When using any tool in the &quot;real world&quot;, you feel more confident if you understand how that tool works. Application
development is no different. When you understand how your development tools function, you feel more comfortable and
confident using them. The goal of this document is to give you a good, high-level overview of how the Quorra
framework &quot;works&quot;. By getting to know the overall framework better, everything feels less &quot;magical&quot; and you will be
more confident building your applications. In addition to a high-level overview of the request lifecycle, we'll cover
&quot;start&quot; files and application events.</p>
<p>If you don't understand all of the terms right away, don't lose heart! Just try to get a basic grasp of what is going
on, and your knowledge will grow as you explore other sections of the documentation.</p>
<h2 id="application-start-amp-request-lifecycle">Application start &amp; Request lifecycle</h2>
<p>Whenever a Qurra application is started <code>index.js</code> script in the application root will be executed. From here, Quorra
begins the process of starting the application and listening to the requests. Getting a general idea for the Quorra
bootstrap process will be useful, so we'll cover that now!</p>
<p>By far, the most important concept to grasp when learning about Quorra's bootstrap process is Service Providers. You
can find a list of service providers by opening your <code>app/config/app.js</code> configuration file and finding the <code>providers</code>
array. These providers serve as the primary bootstrapping mechanism for Quorra. But, before we dig into service
providers, let's go back to <code>index.js</code>. <code>index.js</code> file executes the <code>bootstrap/start.js</code> script with a callback
argument. This file creates the new Positron <code>Application object</code>(Positron is the core module that powers Quorra.),
which serves as the backbone of Quorra application.</p>
<p>After creating the <code>Application object</code>, a few project paths will be set and environment detection will be performed.
Then, an internal Positron bootstrap script will be called with the callback from <code>index.js</code>. This file lives deep
within the Positron source, and sets a few more settings based on quorra application configuration files, such as
<code>request.trustProxyFn</code>, <code>cache.etagFn</code> etc. But, in addition to setting these rather trivial configuration options, it
also does something very important: registers all of the service providers configured for your application.</p>
<p>Simple service providers only have one method: <code>register</code>. This <code>register</code> method is called when the service provider is
registered with the application object via the application's own <code>register</code> method. Within this method, service
providers register things with the Application object. Essentially, each service provider binds one or more
services into the <code>Application object</code>, which allows you to access those bound services within your application. So, for
example, the <code>MailServiceProvider</code> registers service <code>mailer</code>. Of course, service providers may be used for any
bootstrapping task, not just registering things with the Application object.</p>
<p>After initialization of all core components, <code>app/start</code> files will be loaded. Lastly, <code>app/routes.js</code> file
will be loaded. Once <code>routes.js</code> file has been loaded, it returns the callback from the <code>index.js</code> file with the
newly created positron application object. Callback function executes the listen method of application object, which
creates a NodeJS server and starts to listen to Request.</p>
<p>So, let's summarize:</p>
<ul>
<li><code>index.js</code> file is executed.</li>
<li><code>bootstrap/start.js</code> file creates Application and detects environment.</li>
<li>Internal <code>framework/start.js</code> file configures settings and loads service providers.</li>
<li>Application <code>app/start</code> files are loaded.</li>
<li>Application <code>app/routes.js</code> file is loaded.</li>
<li>Starts to listen to Request.</li>
</ul>
<p>Now that you have a good idea of how a quorra application lift a NodeJS server, let's take a closer look at request
life cycle. Whenever Quorra server receives a http request it creates a stacked http kernel object. Stacked http
kernel is nothing but stack of application middleware instances which is programmed to execute in sequence. Then pass
request and response object to the created middleware stack for execution. After all middleware execution global
filters and route level filters are executed from which request reaches to the route.</p>
<h2 id="start-files">Start Files</h2>
<p>Application's start files are stored at <code>app/start</code>. By default, two are included with your application: <code>global.js</code> and <code>local.js</code>.</p>
<p>The <code>global.js</code> start file contains a few basic items by default, such as configuration of the Logger and the inclusion
of <code>app/filters.js</code> file. However, you are free to add anything to this file that you wish. It will be
automatically included on application initialization, regardless of environment. The <code>local.js</code> file, on the other
hand, is only called when the application is executing in the <code>local</code> environment. For more information on
environments, check out the configuration documentation.</p>
<p>Of course, if you have other environments in addition to <code>local</code>, you may create start files for those environments as
well. They will be automatically included when your application is running in that environment. So, for example, if
you have a <code>development</code> environment configured in your <code>bootstrap/start.js</code> file, you may create a
<code>app/start/development.js</code> file, which will be included when application is lifted in that environment.</p>
<h3 id="what-to-place-in-start-files">What To Place In Start Files</h3>
<p>Start files serve as a simple place to place any &quot;bootstrapping&quot; code. For example, you could  configure your logging
preferences, set some js settings, etc. It's totally up to you. Of course, throwing all of your bootstrapping code
into your start files can get messy. For large applications, or if you feel your start files are getting messy,
consider moving some bootstrapping code into <a href="/docs/1.0.0/more/service-providers.html">service providers</a>.</p>
<h2 id="application-events">Application Events</h2>
<h3 id="registering-application-events">Registering Application Events</h3>
<p>You may do pre request processing by registering <code>before</code> application event:</p>
<pre><code class="language-javascript">App.before(function(request, response, next) {

    //

    next();
});</code></pre>
<p>Listeners to this event will be run before request to your application. This event can be helpful for global
filtering or global modification of requests and responses. You may register them in one of your start files.</p>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </article>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <footer id="footer" role="contentinfo">
            <section class="section swatch-blue-white no-padding">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 text-center">
                            <h3>Connect with us</h3>
                            <div id="swatch_social-2" class="sidebar-widget  widget_swatch_social no-margin">
                                <ul class="unstyled inline small-screen-center social-icons social-background social-small">
                                    <li>
                                        <a target="_blank" href="https://www.facebook.com/quorrajs">
                                            <i class="fa fa-facebook"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a target="_blank" href="https://twitter.com/quorrajs">
                                            <i class="fa fa-twitter"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a target="_blank" href="https://github.com/quorrajs">
                                            <i class="fa fa-github-square"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div id="text-4" class="sidebar-widget widget_text bottom-margin-10">
                                <div class="textwidget">QuorraJS 2016 ALL RIGHTS RESERVED
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </footer>
        <a class="go-top hex-alt" href="javascript:void(0)">
            <i class="fa fa-angle-up"></i>
        </a>
    </div>
    <script src="/assets/js/packages.min.js"></script>
    <script src="/assets/js/theme.min.js"></script>
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/algoliasearch.min.js"></script>
    <script src="/assets/js/typeahead.js"></script>
    <script src="/assets/js/Hogan.js"></script>
    <script src="/assets/js/quorra.js"></script>
    <script>console.log({"cliConfig":[],"exclude":["vendor","website"],"baseUrl":"https:\/\/quorrajs.org","docBaseUrl":"\/docs","currentVersion":"master","versions":["master","1.0.0"],"github":{"user":"quorrajs","repo":"Quorra-docs"},"title":"QuorraJS","subTitle":"NodeJS framework for web riders.","menu":{"sections":{"main":{"name":"Preface","items":{"home":{"text":"Quickstart","relativeUrl":"preface\/quickstart.html"},"contribution guide":{"text":"Contribution Guide","relativeUrl":"preface\/contribution-guide.html"}}},"getting-started":{"name":"Getting started","items":{"installation":{"text":"Installation","relativeUrl":"getting-started\/installation.html"},"configuration":{"text":"Configuration","relativeUrl":"getting-started\/configuration.html"},"request lifecycle":{"text":"Request Lifecycle","relativeUrl":"getting-started\/request-lifecycle.html"},"routing":{"text":"Routing","relativeUrl":"getting-started\/routing.html"},"requests & input":{"text":"Requests & Input","relativeUrl":"getting-started\/requests-&-input.html"},"views & responses":{"text":"Views & Responses","relativeUrl":"getting-started\/views-&-responses.html"},"controllers":{"text":"Controllers","relativeUrl":"getting-started\/controllers.html"},"errors & logging":{"text":"Errors & Logging","relativeUrl":"getting-started\/errors-&-logging.html"},"models & orm":{"text":"Models & ORM","relativeUrl":"getting-started\/models-&-orm.html"},"globals":{"text":"Globals","relativeUrl":"getting-started\/globals.html"},"middleware":{"text":"Middleware","relativeUrl":"getting-started\/middleware.html"}}},"learning more":{"name":"Learning more","items":{"Security":{"text":"Security","relativeUrl":"more\/security.html"},"session":{"text":"Session","relativeUrl":"middlewares\/session.html"},"mail":{"text":"Mail","relativeUrl":"more\/mail.html"},"request object":{"text":"Request Object","relativeUrl":"more\/request.html"},"response object":{"text":"Response Object","relativeUrl":"more\/response.html"},"service providers":{"text":"Service Providers","relativeUrl":"more\/service-providers.html"},"body parser":{"text":"Body Parser","relativeUrl":"middlewares\/body-parser.html"},"query parser":{"text":"Query Parser","relativeUrl":"middlewares\/query-parser.html"},"cookie parser":{"text":"Cookie Parser","relativeUrl":"middlewares\/cookie-parser.html"},"authentication":{"text":"Authentication","relativeUrl":"middlewares\/authentication.html"},"localization":{"text":"Localization","relativeUrl":"middlewares\/localization.html"},"http method override":{"text":"HTTP Method Override","relativeUrl":"middlewares\/http-method-override.html"},"serve static":{"text":"Server Static","relativeUrl":"middlewares\/serve-static.html"},"elixir":{"text":"Elixir","relativeUrl":"more\/elixir.html"},"miscellanous":{"text":"Miscellaneous","relativeUrl":"more\/miscellaneous.html"},"testing":{"text":"Testing","relativeUrl":"more\/testing.html"}}},"other":{"name":"Quorra CLI","items":{"home":{"text":"Overview","relativeUrl":"quorra-cli\/overview.html"}}}}},"template":{"directory":"\/home\/harish\/Dropbox\/Code\/quorra-docs\/website"},"pageList":{"13":"getting-started\/configuration.html","7":"getting-started\/controllers.html","9":"getting-started\/errors-&-logging.html","11":"getting-started\/globals.html","10":"getting-started\/installation.html","3":"getting-started\/middleware.html","8":"getting-started\/models-&-orm.html","5":"getting-started\/request-lifecycle.html","12":"getting-started\/requests-&-input.html","6":"getting-started\/routing.html","4":"getting-started\/views-&-responses.html","2":"index.html","28":"middlewares\/authentication.html","24":"middlewares\/body-parser.html","25":"middlewares\/cookie-parser.html","23":"middlewares\/http-method-override.html","27":"middlewares\/localization.html","30":"middlewares\/query-parser.html","26":"middlewares\/serve-static.html","29":"middlewares\/session.html","21":"more\/elixir.html","20":"more\/mail.html","17":"more\/miscellaneous.html","18":"more\/request.html","14":"more\/response.html","16":"more\/security.html","15":"more\/service-providers.html","19":"more\/testing.html","1":"preface\/contribution-guide.html","0":"preface\/quickstart.html","22":"quorra-cli\/overview.html"},"pageTree":{"getting-started":{"configuration.html":"configuration.html","controllers.html":"controllers.html","errors-&-logging.html":"errors-&-logging.html","globals.html":"globals.html","installation.html":"installation.html","middleware.html":"middleware.html","models-&-orm.html":"models-&-orm.html","request-lifecycle.html":"request-lifecycle.html","requests-&-input.html":"requests-&-input.html","routing.html":"routing.html","views-&-responses.html":"views-&-responses.html"},"index.html":"index.html","middlewares":{"authentication.html":"authentication.html","body-parser.html":"body-parser.html","cookie-parser.html":"cookie-parser.html","http-method-override.html":"http-method-override.html","localization.html":"localization.html","query-parser.html":"query-parser.html","serve-static.html":"serve-static.html","session.html":"session.html"},"more":{"elixir.html":"elixir.html","mail.html":"mail.html","miscellaneous.html":"miscellaneous.html","request.html":"request.html","response.html":"response.html","security.html":"security.html","service-providers.html":"service-providers.html","testing.html":"testing.html"},"preface":{"contribution-guide.html":"contribution-guide.html","quickstart.html":"quickstart.html"},"quorra-cli":{"overview.html":"overview.html"}},"currentFile":"getting-started\/request-lifecycle.md","content":"<h1 id=\"request-lifecycle\">Request Lifecycle<\/h1>\n<ul>\n<li><a href=\"#overview\">Overview<\/a><\/li>\n<li><a href=\"#application-start-amp-request-lifecycle\">Application start<\/a><\/li>\n<li><a href=\"#start-files\">Start Files<\/a><\/li>\n<li><a href=\"#application-events\">Application Events<\/a><\/li>\n<\/ul>\n<h2 id=\"overview\">Overview<\/h2>\n<p>When using any tool in the &quot;real world&quot;, you feel more confident if you understand how that tool works. Application\ndevelopment is no different. When you understand how your development tools function, you feel more comfortable and\nconfident using them. The goal of this document is to give you a good, high-level overview of how the Quorra\nframework &quot;works&quot;. By getting to know the overall framework better, everything feels less &quot;magical&quot; and you will be\nmore confident building your applications. In addition to a high-level overview of the request lifecycle, we'll cover\n&quot;start&quot; files and application events.<\/p>\n<p>If you don't understand all of the terms right away, don't lose heart! Just try to get a basic grasp of what is going\non, and your knowledge will grow as you explore other sections of the documentation.<\/p>\n<h2 id=\"application-start-amp-request-lifecycle\">Application start &amp; Request lifecycle<\/h2>\n<p>Whenever a Qurra application is started <code>index.js<\/code> script in the application root will be executed. From here, Quorra\nbegins the process of starting the application and listening to the requests. Getting a general idea for the Quorra\nbootstrap process will be useful, so we'll cover that now!<\/p>\n<p>By far, the most important concept to grasp when learning about Quorra's bootstrap process is Service Providers. You\ncan find a list of service providers by opening your <code>app\/config\/app.js<\/code> configuration file and finding the <code>providers<\/code>\narray. These providers serve as the primary bootstrapping mechanism for Quorra. But, before we dig into service\nproviders, let's go back to <code>index.js<\/code>. <code>index.js<\/code> file executes the <code>bootstrap\/start.js<\/code> script with a callback\nargument. This file creates the new Positron <code>Application object<\/code>(Positron is the core module that powers Quorra.),\nwhich serves as the backbone of Quorra application.<\/p>\n<p>After creating the <code>Application object<\/code>, a few project paths will be set and environment detection will be performed.\nThen, an internal Positron bootstrap script will be called with the callback from <code>index.js<\/code>. This file lives deep\nwithin the Positron source, and sets a few more settings based on quorra application configuration files, such as\n<code>request.trustProxyFn<\/code>, <code>cache.etagFn<\/code> etc. But, in addition to setting these rather trivial configuration options, it\nalso does something very important: registers all of the service providers configured for your application.<\/p>\n<p>Simple service providers only have one method: <code>register<\/code>. This <code>register<\/code> method is called when the service provider is\nregistered with the application object via the application's own <code>register<\/code> method. Within this method, service\nproviders register things with the Application object. Essentially, each service provider binds one or more\nservices into the <code>Application object<\/code>, which allows you to access those bound services within your application. So, for\nexample, the <code>MailServiceProvider<\/code> registers service <code>mailer<\/code>. Of course, service providers may be used for any\nbootstrapping task, not just registering things with the Application object.<\/p>\n<p>After initialization of all core components, <code>app\/start<\/code> files will be loaded. Lastly, <code>app\/routes.js<\/code> file\nwill be loaded. Once <code>routes.js<\/code> file has been loaded, it returns the callback from the <code>index.js<\/code> file with the\nnewly created positron application object. Callback function executes the listen method of application object, which\ncreates a NodeJS server and starts to listen to Request.<\/p>\n<p>So, let's summarize:<\/p>\n<ul>\n<li><code>index.js<\/code> file is executed.<\/li>\n<li><code>bootstrap\/start.js<\/code> file creates Application and detects environment.<\/li>\n<li>Internal <code>framework\/start.js<\/code> file configures settings and loads service providers.<\/li>\n<li>Application <code>app\/start<\/code> files are loaded.<\/li>\n<li>Application <code>app\/routes.js<\/code> file is loaded.<\/li>\n<li>Starts to listen to Request.<\/li>\n<\/ul>\n<p>Now that you have a good idea of how a quorra application lift a NodeJS server, let's take a closer look at request\nlife cycle. Whenever Quorra server receives a http request it creates a stacked http kernel object. Stacked http\nkernel is nothing but stack of application middleware instances which is programmed to execute in sequence. Then pass\nrequest and response object to the created middleware stack for execution. After all middleware execution global\nfilters and route level filters are executed from which request reaches to the route.<\/p>\n<h2 id=\"start-files\">Start Files<\/h2>\n<p>Application's start files are stored at <code>app\/start<\/code>. By default, two are included with your application: <code>global.js<\/code> and <code>local.js<\/code>.<\/p>\n<p>The <code>global.js<\/code> start file contains a few basic items by default, such as configuration of the Logger and the inclusion\nof <code>app\/filters.js<\/code> file. However, you are free to add anything to this file that you wish. It will be\nautomatically included on application initialization, regardless of environment. The <code>local.js<\/code> file, on the other\nhand, is only called when the application is executing in the <code>local<\/code> environment. For more information on\nenvironments, check out the configuration documentation.<\/p>\n<p>Of course, if you have other environments in addition to <code>local<\/code>, you may create start files for those environments as\nwell. They will be automatically included when your application is running in that environment. So, for example, if\nyou have a <code>development<\/code> environment configured in your <code>bootstrap\/start.js<\/code> file, you may create a\n<code>app\/start\/development.js<\/code> file, which will be included when application is lifted in that environment.<\/p>\n<h3 id=\"what-to-place-in-start-files\">What To Place In Start Files<\/h3>\n<p>Start files serve as a simple place to place any &quot;bootstrapping&quot; code. For example, you could  configure your logging\npreferences, set some js settings, etc. It's totally up to you. Of course, throwing all of your bootstrapping code\ninto your start files can get messy. For large applications, or if you feel your start files are getting messy,\nconsider moving some bootstrapping code into <a href=\"\/docs\/1.0.0\/more\/service-providers.html\">service providers<\/a>.<\/p>\n<h2 id=\"application-events\">Application Events<\/h2>\n<h3 id=\"registering-application-events\">Registering Application Events<\/h3>\n<p>You may do pre request processing by registering <code>before<\/code> application event:<\/p>\n<pre><code class=\"language-javascript\">App.before(function(request, response, next) {\n\n    \/\/\n\n    next();\n});<\/code><\/pre>\n<p>Listeners to this event will be run before request to your application. This event can be helpful for global\nfiltering or global modification of requests and responses. You may register them in one of your start files.<\/p>"});</script>
</body>
</html>

